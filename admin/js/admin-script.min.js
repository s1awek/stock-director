const{createApp:createApp,ref:ref,computed:computed,watch:watch,nextTick:nextTick}=Vue,app=createApp({setup(){const t=ref([]),e=ref({minQuantity:1,maxQuantity:null,message:""});watch(t,(t=>{if(t.length>0){const n=t[t.length-1];e.value.minQuantity=n.maxQuantity}}),{deep:!0});const n=computed((()=>{const{minQuantity:n,maxQuantity:a,message:i}=e.value,o=null!==n&&null!==a&&parseInt(n)<parseInt(a),u=i.trim().length>0,s=0===t.value.length||t.value.every((t=>a>t.maxQuantity));return o&&u&&s}));return{conditions:t,newCondition:e,addCondition:()=>{n.value&&(t.value.push({...e.value}),t.value.sort(((t,e)=>t.minQuantity-e.minQuantity)),t.value.forEach(((e,n)=>{n>0&&(t.value[n].minQuantity=t.value[n-1].maxQuantity)})),e.value={minQuantity:t.value[t.value.length-1].maxQuantity,maxQuantity:null,message:""},nextTick((()=>{document.getElementById("maxQuantity").focus()})))},removeCondition:n=>{t.value.splice(n,1),0===t.value.length?e.value.minQuantity=1:n<t.value.length&&(t.value[n].minQuantity=t.value[n-1].maxQuantity)},saveConditions:async()=>{try{const e=await fetch(mwsData.ajax_url,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"save_conditions",nonce:mwsData.nonce,conditions:JSON.stringify(t.value)})});if(!e.ok)throw new Error("Network response was not ok.");const n=await e.json();n.success?console.log("Settings saved:",n):console.error("Error from WP:",n)}catch(t){console.error("Fetch error:",t)}},isValidNewCondition:n}}});app.mount("#wp-stock-director-settings");
//# sourceMappingURL=admin-script.min.js.map
